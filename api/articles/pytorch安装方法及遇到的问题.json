{"title":"pytorch安装方法及遇到的问题","slug":"pytorch安装方法及遇到的问题","date":"2021-01-18T10:30:11.000Z","updated":"2021-04-02T09:04:48.828Z","comments":true,"path":"api/articles/pytorch安装方法及遇到的问题.json","excerpt":"同样道理，网上的解决方法太杂了，经过不断被坑之后，总结的我自己的方法。","covers":["/2021/01/pytorch%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95%E5%8F%8A%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/1561356.png","/2021/01/pytorch%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95%E5%8F%8A%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/5516516.png","/2021/01/pytorch%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95%E5%8F%8A%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/546165651.png","/2021/01/pytorch%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95%E5%8F%8A%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/41651651.png"],"content":"<p>同样道理，网上的解决方法太杂了，经过不断被坑之后，总结的我自己的方法。</p>\n<a id=\"more\"></a>\n<h3 id=\"查看使用的CUDA的版本\"><a href=\"#查看使用的CUDA的版本\" class=\"headerlink\" title=\"查看使用的CUDA的版本\"></a>查看使用的CUDA的版本</h3><p>首先最好查看一下电脑上可以使用的CUDA的版本，打开方式是右键点击桌面后选择“NVIDIA控制面板”，如果没有就从控制面板打开</p>\n<p>注：新版的系统默认不安装这个控制面板，没有的话可以从Microsoft store中去下载</p>\n<p><img src=\"/2021/01/pytorch%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95%E5%8F%8A%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/1561356.png\" alt=\"1561356\"></p>\n<p>打开之后就点击”系统信息”</p>\n<p><img src=\"/2021/01/pytorch%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95%E5%8F%8A%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/5516516.png\" alt=\"5516516\"></p>\n<p>点击“组件”，这时候会有您的显卡版本等等一些的信息，其中有您的显卡目前的CUDA的驱动版本，要注意，这里并不是表明您已经安装了CUDATOOKID，仅仅代表，目前支持的<strong>最高版本</strong>，因此，一定要注意，您在下面通过Pytorch官网选择安装命令的的时候，不能超过此处显示的CUDA版本号。</p>\n<p><img src=\"/2021/01/pytorch%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95%E5%8F%8A%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/546165651.png\" alt=\"546165651\"></p>\n<h3 id=\"配置清华镜像\"><a href=\"#配置清华镜像\" class=\"headerlink\" title=\"配置清华镜像\"></a>配置清华镜像</h3><p>由于我使用的是anaconda管理Python的环境，接下来我会使用anaconda的命令来进行安装，pip也可以这样进行安装</p>\n<p>由于从国外服务器下载太慢，我使用了国内镜像源，所以可以配置一下清华镜像源，打开anaconda命令窗口，执行</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda config --add channels https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;pkgs&#x2F;free&#x2F;</span><br><span class=\"line\">conda config --add channels https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;pkgs&#x2F;main&#x2F;</span><br><span class=\"line\">conda config --set show_channel_urls yes</span><br></pre></td></tr></table></figure>\n<p>三行执行后就可以从清华镜像服务器上下载一些库了</p>\n<h3 id=\"在线下载\"><a href=\"#在线下载\" class=\"headerlink\" title=\"在线下载\"></a>在线下载</h3><p>进入Pytorch官网（<a href=\"https://pytorch.org/），根据自己电脑配置和需求来配置一下\">https://pytorch.org/），根据自己电脑配置和需求来配置一下</a></p>\n<p><img src=\"/2021/01/pytorch%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95%E5%8F%8A%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/41651651.png\" alt=\"41651651\"></p>\n<p>最后生成的命令就是在命令行中安装命令</p>\n<h3 id=\"离线安装\"><a href=\"#离线安装\" class=\"headerlink\" title=\"离线安装\"></a>离线安装</h3><p>安装的时候会有一些包总会停止下载，可以直接进入到清华镜像源</p>\n<ul>\n<li><p>Windows版本（<a href=\"https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/win-64/?C=M&amp;O=A）\">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/win-64/?C=M&amp;O=A）</a></p>\n</li>\n<li><p>Linux版本（<a href=\"https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/linux-64/?C=M&amp;O=A）\">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/linux-64/?C=M&amp;O=A）</a></p>\n</li>\n</ul>\n<p>找到自己想下载的版本之后，直接去手动下载。下载完成后通过命令行，cd到下载的目录下，执行<code>conda install --offline pytorch-1.3.0-py3.6_cuda9.2.148_cudnn7.6.3_0.tar.bz2</code>，<code>--offline</code>后面部分是名字，一定加上扩展名</p>\n<p>离线安装好后，<strong>还是需要重新利用conda来在线安装一次</strong>，要用它来对相关的包来进行在线匹配(也就是根据安装好的pytorch来匹配那些对应的好多库，不是说再下载一遍pytorch)。</p>\n<p>但是一定要注意了！！！</p>\n<p>在利用官网代码时<code>conda install pytorch torchvision cudatoolkit=9.2 -c pytorch</code>一定要<strong>删掉</strong>后面的<code>-c pytorch</code>，因为它代表直接从官网去下载，不会与本地安装好的匹配，还会全部重新下载。</p>\n<p>所以改成：<code>conda install pytorch torchvision cudatoolkit=9.2</code>它就会自动匹配之前离线安装好的东西，然后匹配相关的库的等级、版本之类的<br>不匹配相关库的等级的话，就会出现以下类似错误：<code>libcudart.so.9.2: cannot open shared object file: No such file or directory</code></p>\n<h3 id=\"测试\"><a href=\"#测试\" class=\"headerlink\" title=\"测试\"></a>测试</h3><p>接下来就测试一下有没有安装成功</p>\n<p>进入Python，输入：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> torch</span><br><span class=\"line\">torch.cuda.is_available()</span><br></pre></td></tr></table></figure>\n<p>如果返回的是True，那就没问题，可以使用GPU加速。</p>\n<h3 id=\"参考来源\"><a href=\"#参考来源\" class=\"headerlink\" title=\"参考来源\"></a>参考来源</h3><blockquote>\n<p><a href=\"https://www.bilibili.com/read/cv7476249\">https://www.bilibili.com/read/cv7476249</a></p>\n<p><a href=\"https://blog.csdn.net/qq_41936559/article/details/102699082\">https://blog.csdn.net/qq_41936559/article/details/102699082</a></p>\n</blockquote>\n","more":"<h3 id=\"查看使用的CUDA的版本\"><a href=\"#查看使用的CUDA的版本\" class=\"headerlink\" title=\"查看使用的CUDA的版本\"></a>查看使用的CUDA的版本</h3><p>首先最好查看一下电脑上可以使用的CUDA的版本，打开方式是右键点击桌面后选择“NVIDIA控制面板”，如果没有就从控制面板打开</p>\n<p>注：新版的系统默认不安装这个控制面板，没有的话可以从Microsoft store中去下载</p>\n<p><img src=\"/2021/01/pytorch%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95%E5%8F%8A%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/1561356.png\" alt=\"1561356\"></p>\n<p>打开之后就点击”系统信息”</p>\n<p><img src=\"/2021/01/pytorch%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95%E5%8F%8A%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/5516516.png\" alt=\"5516516\"></p>\n<p>点击“组件”，这时候会有您的显卡版本等等一些的信息，其中有您的显卡目前的CUDA的驱动版本，要注意，这里并不是表明您已经安装了CUDATOOKID，仅仅代表，目前支持的<strong>最高版本</strong>，因此，一定要注意，您在下面通过Pytorch官网选择安装命令的的时候，不能超过此处显示的CUDA版本号。</p>\n<p><img src=\"/2021/01/pytorch%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95%E5%8F%8A%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/546165651.png\" alt=\"546165651\"></p>\n<h3 id=\"配置清华镜像\"><a href=\"#配置清华镜像\" class=\"headerlink\" title=\"配置清华镜像\"></a>配置清华镜像</h3><p>由于我使用的是anaconda管理Python的环境，接下来我会使用anaconda的命令来进行安装，pip也可以这样进行安装</p>\n<p>由于从国外服务器下载太慢，我使用了国内镜像源，所以可以配置一下清华镜像源，打开anaconda命令窗口，执行</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda config --add channels https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;pkgs&#x2F;free&#x2F;</span><br><span class=\"line\">conda config --add channels https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;pkgs&#x2F;main&#x2F;</span><br><span class=\"line\">conda config --set show_channel_urls yes</span><br></pre></td></tr></table></figure>\n<p>三行执行后就可以从清华镜像服务器上下载一些库了</p>\n<h3 id=\"在线下载\"><a href=\"#在线下载\" class=\"headerlink\" title=\"在线下载\"></a>在线下载</h3><p>进入Pytorch官网（<a href=\"https://pytorch.org/），根据自己电脑配置和需求来配置一下\">https://pytorch.org/），根据自己电脑配置和需求来配置一下</a></p>\n<p><img src=\"/2021/01/pytorch%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95%E5%8F%8A%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/41651651.png\" alt=\"41651651\"></p>\n<p>最后生成的命令就是在命令行中安装命令</p>\n<h3 id=\"离线安装\"><a href=\"#离线安装\" class=\"headerlink\" title=\"离线安装\"></a>离线安装</h3><p>安装的时候会有一些包总会停止下载，可以直接进入到清华镜像源</p>\n<ul>\n<li><p>Windows版本（<a href=\"https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/win-64/?C=M&amp;O=A）\">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/win-64/?C=M&amp;O=A）</a></p>\n</li>\n<li><p>Linux版本（<a href=\"https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/linux-64/?C=M&amp;O=A）\">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/linux-64/?C=M&amp;O=A）</a></p>\n</li>\n</ul>\n<p>找到自己想下载的版本之后，直接去手动下载。下载完成后通过命令行，cd到下载的目录下，执行<code>conda install --offline pytorch-1.3.0-py3.6_cuda9.2.148_cudnn7.6.3_0.tar.bz2</code>，<code>--offline</code>后面部分是名字，一定加上扩展名</p>\n<p>离线安装好后，<strong>还是需要重新利用conda来在线安装一次</strong>，要用它来对相关的包来进行在线匹配(也就是根据安装好的pytorch来匹配那些对应的好多库，不是说再下载一遍pytorch)。</p>\n<p>但是一定要注意了！！！</p>\n<p>在利用官网代码时<code>conda install pytorch torchvision cudatoolkit=9.2 -c pytorch</code>一定要<strong>删掉</strong>后面的<code>-c pytorch</code>，因为它代表直接从官网去下载，不会与本地安装好的匹配，还会全部重新下载。</p>\n<p>所以改成：<code>conda install pytorch torchvision cudatoolkit=9.2</code>它就会自动匹配之前离线安装好的东西，然后匹配相关的库的等级、版本之类的<br>不匹配相关库的等级的话，就会出现以下类似错误：<code>libcudart.so.9.2: cannot open shared object file: No such file or directory</code></p>\n<h3 id=\"测试\"><a href=\"#测试\" class=\"headerlink\" title=\"测试\"></a>测试</h3><p>接下来就测试一下有没有安装成功</p>\n<p>进入Python，输入：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> torch</span><br><span class=\"line\">torch.cuda.is_available()</span><br></pre></td></tr></table></figure>\n<p>如果返回的是True，那就没问题，可以使用GPU加速。</p>\n<h3 id=\"参考来源\"><a href=\"#参考来源\" class=\"headerlink\" title=\"参考来源\"></a>参考来源</h3><blockquote>\n<p><a href=\"https://www.bilibili.com/read/cv7476249\">https://www.bilibili.com/read/cv7476249</a></p>\n<p><a href=\"https://blog.csdn.net/qq_41936559/article/details/102699082\">https://blog.csdn.net/qq_41936559/article/details/102699082</a></p>\n</blockquote>","categories":[{"name":"人工智能","path":"api/categories/人工智能.json"}],"tags":[{"name":"解决问题","path":"api/tags/解决问题.json"},{"name":"python","path":"api/tags/python.json"},{"name":"深度学习","path":"api/tags/深度学习.json"}]}